<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/sneeze.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">src/</a> sneeze.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">74.81% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>101/135</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">51.28% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>60/117</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">85.71% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>18/21</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">75.94% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>101/133</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">12×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-yes">10×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">5×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">7×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-yes">3×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">6×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">2×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"> module.exports = (function(){
  var request = require('superagent');
&nbsp;
  var _sneeze = {};
  var config;
&nbsp;
  var isFunction = function(functionToCheck) {
   var getType = {};
   return functionToCheck &amp;&amp; getType.toString.call(functionToCheck) === '[object Function]';
  }
&nbsp;
  _sneeze._enabled = true;
&nbsp;
  /*
    - Gets the browser type and version if available
  */
  _sneeze.browserWithVersion = (function(){
    <span class="missing-if-branch" title="if path not taken" >I</span>if(typeof navigator == 'undefined' &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >typeof process != 'undefined')</span>{
<span class="cstat-no" title="statement not covered" >      return 'NodeJS';</span>
    }else <span class="missing-if-branch" title="if path not taken" >I</span>if(typeof navigator == 'undefined'){
<span class="cstat-no" title="statement not covered" >      return 'No browser information available';</span>
    }
    var ua= navigator.userAgent, tem, 
    M= ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || <span class="branch-1 cbranch-no" title="branch not covered" >[];</span>
    <span class="missing-if-branch" title="if path not taken" >I</span>if(/trident/i.test(M[1])){
<span class="cstat-no" title="statement not covered" >        tem=  /\brv[ :]+(\d+)/g.exec(ua) || [];</span>
<span class="cstat-no" title="statement not covered" >        return 'IE '+(tem[1] || '');</span>
    }
    <span class="missing-if-branch" title="if path not taken" >I</span>if(M[1]=== 'Chrome'){
<span class="cstat-no" title="statement not covered" >        tem= ua.match(/\b(OPR|Edge)\/(\d+)/);</span>
<span class="cstat-no" title="statement not covered" >        if(tem!= null) <span class="cstat-no" title="statement not covered" >return tem.slice(1).join(' ').replace('OPR', 'Opera');</span></span>
    }
    M= M[2]? [M[1], M[2]]: <span class="branch-1 cbranch-no" title="branch not covered" >[navigator.appName, navigator.appVersion, '-?'];</span>
    <span class="missing-if-branch" title="if path not taken" >I</span>if((tem= ua.match(/version\/(\d+)/i))!= null) <span class="cstat-no" title="statement not covered" >M.splice(1, 1, tem[1]);</span>
    return M.join(' ');
  })();
&nbsp;
  _sneeze.configure = function(configuration){
    configuration = configuration || {};
    config = config || {};
    config.url = configuration.url || config.url || '/errors';
    config.data = configuration.data || config.data;
    // any other configurations can go here
  }
&nbsp;
  // returns a shallow copy of the configuration
  _sneeze.getConfig = function(){
    var configuration;
    <span class="missing-if-branch" title="else path not taken" >E</span>if(config){
      configuration = {};
      for(var attr in config){
        configuration[attr] = config[attr];
      }
    }
    return configuration;
  }
&nbsp;
  _sneeze.getAdditionalData = function(error, options){
    var context = options.context || this;
    if(options.data &amp;&amp; isFunction(options.data)){
      return options.data.apply(context, error);
    }
    return options.data;
  }
&nbsp;
  // will return options, comparing the options with _config, and fills the missing pieces of the options hash with _config values
  // will return options if _config is not defined
  _sneeze.extendOptions = function(options){
    <span class="missing-if-branch" title="if path not taken" >I</span>if(!config){
<span class="cstat-no" title="statement not covered" >      this.configure();</span>
    }
    for(var attrName in config){
      <span class="missing-if-branch" title="else path not taken" >E</span>if(typeof options[attrName] == 'undefined'){
        options[attrName] = config[attrName];
      }
    }
  }
&nbsp;
  /*
    - Accepts an error object and passes the error to the configured url via POST
    - Will attempt to post to the server as long as a valid response is returned
    - Will not attempt further logging if a request to the server returns an error
  */
  _sneeze.log = function(error, options){
    if(!this._enabled){
      return false;
    }
&nbsp;
    options = options || {};
&nbsp;
    this.extendOptions(options);
    
    var errorInfo = this.getErrorInfo(error);
&nbsp;
    errorInfo.data = this.getAdditionalData(error, options);
&nbsp;
    errorInfo.device = this.getDeviceInfo();
    try{
      this.sendError(errorInfo, options);
    }catch(e){
      _sneeze.disable();
    }
&nbsp;
    return true;
  }
&nbsp;
  _sneeze.sendError = <span class="fstat-no" title="function not covered" >function(info, options){</span>
<span class="cstat-no" title="statement not covered" >    request.post(options.url)</span>
      .send(info)
      .end(<span class="fstat-no" title="function not covered" >function(err, response){</span>
<span class="cstat-no" title="statement not covered" >        if(err){</span>
<span class="cstat-no" title="statement not covered" >          _sneeze.disable();</span>
        }
      });
  }
&nbsp;
  /*
    Parses an error for 
      - the event that triggered the error
      - the source of the error (script)
      - the line number of the error
      - the column number of the error
      - the complete stack of the error
&nbsp;
    Will return the parsed error and the user's browser and version
  */
&nbsp;
  _sneeze.getErrorInfo = function(error){
    error = error || {};
    
    var errorInfo = {},
        stack = error.stack || '';
&nbsp;
    errorInfo.message = error.message;
    errorInfo.stack = stack.trim();
    errorInfo.browser = this.browserWithVersion;
&nbsp;
    <span class="missing-if-branch" title="if path not taken" >I</span>if((/chrome/i).test(this.browserWithVersion) || (/NodeJS/.test(this.browserWithVersion))){
<span class="cstat-no" title="statement not covered" >      var pieces = stack.split('\n'),</span>
          src = pieces[pieces.length-1].replace(/(\(*)(\)*)/, '').split(':'),
          stop = src.length-2,
          source = '';
&nbsp;
<span class="cstat-no" title="statement not covered" >      source = '';</span>
<span class="cstat-no" title="statement not covered" >      for(var i=0; i &lt; stop; i++){</span>
<span class="cstat-no" title="statement not covered" >        source+=src[i];</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if(source.length){</span>
<span class="cstat-no" title="statement not covered" >        errorInfo.event = source.split('(')[0].trim();</span>
<span class="cstat-no" title="statement not covered" >        errorInfo.source = source.split('(')[1].trim();</span>
<span class="cstat-no" title="statement not covered" >        errorInfo.lineno = parseInt(src[src.length-2].trim());</span>
<span class="cstat-no" title="statement not covered" >        errorInfo.colno = parseInt(src[src.length-1].trim().replace(')', ''));</span>
      }
    }else <span class="missing-if-branch" title="else path not taken" >E</span>if((/firefox/i).test(this.browserWithVersion)){
      errorInfo.event = 'N/A';
      errorInfo.source = error.fileName &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >error.fileName.toString().length?</span> <span class="branch-0 cbranch-no" title="branch not covered" >error.fileName </span>: 'N/A';
      errorInfo.lineno = error.lineNumber &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >error.lineNumber.toString().length?</span> <span class="branch-0 cbranch-no" title="branch not covered" >error.lineNumber </span>: 'N/A';
      errorInfo.colno = error.columnNumber &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >error.columnNumber.toString().length?</span> <span class="branch-0 cbranch-no" title="branch not covered" >error.columnNumber </span>: 'N/A';
    }else <span class="cstat-no" title="statement not covered" >if((/IE/.test(this.browserWithVersion)) || (/msie/.test(this.browserWithVersion))){</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.message = error.description &amp;&amp; error.description.toString().length? error.description : 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.event = 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.source = 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.lineno = 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.colno = 'N/A';</span>
    }else <span class="cstat-no" title="statement not covered" >if((/safari/i).test(this.browserWithVersion)){</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.event = 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.source = error.source &amp;&amp; error.source.toString().length? error.source : 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.lineno = error.lineno &amp;&amp; error.lineno.toString().length? error.lineno : 'N/A';</span>
<span class="cstat-no" title="statement not covered" >      errorInfo.colno = error.colno &amp;&amp; error.colno.toString().length? error.colno : 'N/A';</span>
    }
    return errorInfo;
  }
&nbsp;
  _sneeze.getDeviceInfo = function(){
    return typeof navigator != 'undefined' &amp;&amp; navigator.userAgent ? navigator.userAgent : <span class="branch-1 cbranch-no" title="branch not covered" >'N/A';</span>
  }
  /*
    - Global watch for errors.
    - Does not receive errors from functions executed with sneeze.catch
    - accepts a callback function, but does not wait for sneeze to send the error to the server
  */
&nbsp;
  _sneeze.listen = function(options){
    options = options || {};
    var self = this;
    <span class="missing-if-branch" title="else path not taken" >E</span>if(typeof window != 'undefined'){
      window.onerror = function(message, source, lineno, colno, error){
        <span class="missing-if-branch" title="else path not taken" >E</span>if(!error){
          error = { message: message, source: source, lineno: lineno, colno: colno, stack: 'N/A'};
        }
        self.processError(error, options);
      }
    }else{
<span class="cstat-no" title="statement not covered" >      process.on('uncaughtException', <span class="fstat-no" title="function not covered" >function(error){</span></span>
<span class="cstat-no" title="statement not covered" >        self.processError(error, options);</span>
      });
    }
  }
&nbsp;
  _sneeze.processError = function(error, options){
    var context = options.context || this;
    this.log(error, options);
    <span class="missing-if-branch" title="else path not taken" >E</span>if(options.onError){
      options.onError.apply(context, [error, options]);
    }
  }
  /* 
    - Attempts a function and catches any errors. 
    - Will execute a callback if passed, but does not wait for sneeze to send the error to the server
  */
  _sneeze.catch = function(fn, options){
    var self = this;
&nbsp;
    self.wrapTryCatch(fn, options)();
  }
&nbsp;
  _sneeze.wrapTryCatch = function(fn, options){
    var self = this;
    var context = options.context || this;
&nbsp;
    return function(){
      var err = null;
      try{
        fn.apply(context, arguments)
      }catch(e){
        err = { e: e }
      }
&nbsp;
      <span class="missing-if-branch" title="else path not taken" >E</span>if(err){
        self.log(err.e, options)
        <span class="missing-if-branch" title="else path not taken" >E</span>if(options.onError){
          options.onError.apply(context, [err.e, options]);
        }
      }
    }
  }
&nbsp;
  _sneeze.enable = function(){
    this._enabled = true;
  }
&nbsp;
  _sneeze.disable = function(){
    this._enabled = false;
  }
&nbsp;
  /* 
    - Setup default configuration
  */
  _sneeze.configure(); 
&nbsp;
  return _sneeze;
})();
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Apr 28 2016 08:28:34 GMT-0400 (EDT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
